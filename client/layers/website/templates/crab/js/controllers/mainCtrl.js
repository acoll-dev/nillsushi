(function() {
  'use strict';
  angular.module('mainApp').controller('mainCtrl', ["$rootScope", "$scope", "$grRestful", "$grAlert", "$grModal", "$localStorage", "$timeout", function($rootScope, $scope, $grRestful, $grAlert, $grModal, $localStorage, $timeout) {
    var alert;
    $rootScope.GRIFFO.curYear = (new Date).getFullYear();
    if ($rootScope.GRIFFO.filter.page.blocks) {
      $rootScope.BLOCKS = {};
      angular.forEach($rootScope.GRIFFO.filter.page.blocks, function(block) {
        return $rootScope.BLOCKS[block.name] = block.content;
      });
    }
    alert = $grAlert["new"]();
    $rootScope.logouting = false;
    $rootScope.gr = {};
    $rootScope.gr.website = {
      copyright: 'Copyright © ' + (new Date).getFullYear() + ' - Todos os direitos reservados.'
    };
    $rootScope.gr.contactHeader = [
      {
        title: 'Facebook Acoll',
        link: 'http://fb.com/fan.acoll',
        "class": 'contact fa fa-fw fa-2x fa-facebook-square'
      }, {
        title: 'E-mail Acoll',
        link: 'mailto:contato@acoll.com.br',
        "class": 'contact fa fa-fw fa-2x fa-envelope'
      }
    ];
    $rootScope.gr.shops = [];
    $rootScope.gr.banners = [];
    $grRestful.find({
      module: 'banner',
      action: 'get'
    }).then(function(r) {
      if (r.response) {
        return $rootScope.gr.banners = r.response;
      }
    });
    $grRestful.find({
      module: 'shop',
      action: 'get'
    }).then(function(r) {
      if (r.response) {
        return $rootScope.gr.shops = r.response;
      }
    });
    $rootScope.logout = function() {
      alert.show('loading', 'Saindo...', 0);
      $rootScope.logouting = true;
      return $grRestful.auth({
        action: 'logout'
      }).then(function(r) {
        delete $localStorage.griffo_cart_ready;
        if (r.response) {
          alert.show('success', 'Você saiu do sistema e está sendo redirecionado!');
          window.location.reload();
        } else {
          console.debug('Falha no logout!');
        }
        $rootScope.logouting = false;
      }, function(r) {
        return console.debug('Falha no logout!');
      });
    };
    return (function() {
      var init, ready, ref, setProducts;
      init = true;
      ready = {
        categories: false,
        products: false
      };
      setProducts = function() {
        var productLoop;
        productLoop = function(category) {
          category.products = [];
          angular.forEach($scope.products, function(product) {
            if (product.fkidcategory === category.idcategory) {
              product.count = 0;
              category.products.push(product);
              return $rootScope.gr.cart.add(product);
            }
          });
          if (category.child) {
            return angular.forEach(category.child, function(subcategory) {
              return productLoop(subcategory);
            });
          }
        };
        return angular.forEach($scope.categories, function(category) {
          return productLoop(category);
        });
      };
      if (!$localStorage.griffo_cart) {
        $localStorage.griffo_cart = [];
      }
      $rootScope.$watch('gr.cart.items', (function(items) {
        var arr;
        arr = [];
        angular.forEach(items, function(i) {
          if (i.count > 0) {
            return arr.push({
              id: i.idproduct || i.id,
              name: i.name,
              count: i.count,
              unitvalue: i.unitvalue
            });
          }
        });
        return $localStorage.griffo_cart = arr;
      }), true);
      $rootScope.ready = function() {
        if (ready.categories && ready.products) {
          return true;
        } else {
          return false;
        }
      };
      $rootScope.products = [];
      $rootScope.categories = [];
      $rootScope.gr.cart = {
        title: 'Lista do pedido',
        templateUrl: 'cart.html',
        placement: 'bottom',
        animation: false,
        trigger: 'click',
        opened: false,
        items: (ref = $localStorage.griffo_cart) != null ? ref : [],
        length: function(total) {
          var l;
          l = 0;
          angular.forEach($rootScope.gr.cart.items, function(item) {
            if (item.count > 0 && !total) {
              l++;
            } else if (total) {
              l += item.count;
            }
          });
          return l;
        },
        check: function(item) {
          var count;
          count = parseInt(item.count);
          if (count > 1000) {
            count = 1000;
          } else if (count < 0) {
            count = 0;
          } else if (!/[0-9]+/.test(count)) {
            count = 0;
          }
          item.count = count;
        },
        clear: function() {
          angular.forEach($rootScope.gr.cart.items, function(item) {
            item.count = 0;
          });
        },
        has: function(item) {
          var found, index;
          found = false;
          index = void 0;
          angular.forEach($rootScope.gr.cart.items, function(i, id) {
            if (i.name === item.name) {
              found = true;
              index = id;
            }
          });
          if (found) {
            return index;
          } else {
            return found;
          }
        },
        remove: function(item) {
          item.count = 0;
        },
        add: function(item) {
          var found;
          found = false;
          angular.forEach($rootScope.gr.cart.items, function(i) {
            if (i.name === item.name) {
              found = true;
            }
          });
          if (!found) {
            item.count = 0;
            $rootScope.gr.cart.items.push(item);
          }
        },
        total: function() {
          var total;
          total = 0;
          angular.forEach($rootScope.gr.cart.items, function(item) {
            total += item.unitvalue * item.count;
          });
          return total;
        },
        submit: function() {
          if ($rootScope.GRIFFO.filter.page.url !== 'finish/') {
            $localStorage.griffo_cart_ready = true;
            $timeout(function() {
              location.href = $rootScope.GRIFFO.curAlias + '/finish';
            });
          } else {
            $rootScope.finishForm.submit();
          }
        },
        cancel: function() {
          $grModal.confirm('Tem certeza que deseja cancelar?', function() {
            $rootScope.gr.cart.clear();
            delete $localStorage.griffo_cart_ready;
          });
        }
      };
      $grRestful.find({
        module: 'category',
        action: 'module',
        params: 'name=product'
      }).then(function(r) {
        if (r.response) {
          $rootScope.categories = r.response;
          ready.categories = true;
          if ($rootScope.ready) {
            return setProducts();
          }
        }
      });
      $grRestful.find({
        module: 'product',
        action: 'get'
      }).then(function(r) {
        if (r.response) {
          $scope.products = r.response;
          angular.forEach(r.response, function(item) {
            return item.picture = $rootScope.GRIFFO.uploadPath + item.picture;
          });
          ready.products = true;
          if ($rootScope.ready) {
            return setProducts();
          }
        }
      });
      return angular.element('body').on({
        mousedown: function(e) {
          var target;
          target = angular.element(e.target);
          if (target.parents('.cart').length === 0 && $scope.gr.cart.opened) {
            return angular.element('.btn-cart').trigger('click');
          }
        }
      });
    })();
  }]);

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNsaWVudC9sYXllcnMvd2Vic2l0ZS90ZW1wbGF0ZXMvY3JhYi9jb2ZmZWUvY29udHJvbGxlcnMvbWFpbkN0cmwuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQUE7RUFDQSxPQUFPLENBQUMsTUFBUixDQUFlLFNBQWYsQ0FBeUIsQ0FBQyxVQUExQixDQUFxQyxVQUFyQyxFQUFpRCxTQUFDLFVBQUQsRUFBYSxNQUFiLEVBQXFCLFVBQXJCLEVBQWlDLFFBQWpDLEVBQTJDLFFBQTNDLEVBQXFELGFBQXJELEVBQW9FLFFBQXBFO0FBRTdDLFFBQUE7SUFBQSxVQUFVLENBQUMsTUFBTSxDQUFDLE9BQWxCLEdBQTRCLENBQUMsSUFBSSxJQUFMLENBQVUsQ0FBQyxXQUFYLENBQUE7SUFFNUIsSUFBRyxVQUFVLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBakM7TUFDSSxVQUFVLENBQUMsTUFBWCxHQUFvQjtNQUNwQixPQUFPLENBQUMsT0FBUixDQUFnQixVQUFVLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBOUMsRUFBc0QsU0FBQyxLQUFEO2VBQ2xELFVBQVUsQ0FBQyxNQUFPLENBQUEsS0FBSyxDQUFDLElBQU4sQ0FBbEIsR0FBZ0MsS0FBSyxDQUFDO01BRFksQ0FBdEQsRUFGSjs7SUFNQSxLQUFBLEdBQVEsUUFBUSxDQUFDLEtBQUQsQ0FBUixDQUFBO0lBQ1IsVUFBVSxDQUFDLFNBQVgsR0FBdUI7SUFDdkIsVUFBVSxDQUFDLEVBQVgsR0FBZ0I7SUFDaEIsVUFBVSxDQUFDLEVBQUUsQ0FBQyxPQUFkLEdBQXdCO01BQUEsU0FBQSxFQUFXLGNBQUEsR0FBaUIsQ0FBQyxJQUFJLElBQUwsQ0FBVSxDQUFDLFdBQVgsQ0FBQSxDQUFqQixHQUE0QyxrQ0FBdkQ7O0lBQ3hCLFVBQVUsQ0FBQyxFQUFFLENBQUMsYUFBZCxHQUE4QjtNQUMxQjtRQUNJLEtBQUEsRUFBTyxnQkFEWDtRQUVJLElBQUEsRUFB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LENBQWxDLElBQXdDLE1BQU0sQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQTFEO21CQUNJLE9BQU8sQ0FBQyxPQUFSLENBQWdCLFdBQWhCLENBQTRCLENBQUMsT0FBN0IsQ0FBcUMsT0FBckMsRUFESjs7UUFGTyxDQUFYO09BREo7SUE1SkQsQ0FBQSxDQUFILENBQUE7RUE1RDZDLENBQWpEO0FBREEiLCJmaWxlIjoiY2xpZW50L2xheWVycy93ZWJzaXRlL3RlbXBsYXRlcy9jcmFiL2pzL2NvbnRyb2xsZXJzL21haW5DdHJsLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5hbmd1bGFyLm1vZHVsZSgnbWFpbkFwcCcpLmNvbnRyb2xsZXIgJ21haW5DdHJsJywgKCRyb290U2NvcGUsICRzY29wZSwgJGdyUmVzdGZ1bCwgJGdyQWxlcnQsICRnck1vZGFsLCAkbG9jYWxTdG9yYWdlLCAkdGltZW91dCkgLT5cblxuICAgICRyb290U2NvcGUuR1JJRkZPLmN1clllYXIgPSAobmV3IERhdGUpLmdldEZ1bGxZZWFyKClcblxuICAgIGlmICRyb290U2NvcGUuR1JJRkZPLmZpbHRlci5wYWdlLmJsb2Nrc1xuICAgICAgICAkcm9vdFNjb3BlLkJMT0NLUyA9IHt9XG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaCAkcm9vdFNjb3BlLkdSSUZGTy5maWx0ZXIucGFnZS5ibG9ja3MsIChibG9jaykgLT5cbiAgICAgICAgICAgICRyb290U2NvcGUuQkxPQ0tTW2Jsb2NrLm5hbWVdID0gYmxvY2suY29udGVudFxuXG5cbiAgICBhbGVydCA9ICRnckFsZXJ0Lm5ldygpXG4gICAgJHJvb3RTY29wZS5sb2dvdXRpbmcgPSBmYWxzZVxuICAgICRyb290U2NvcGUuZ3IgPSB7fVxuICAgICRyb290U2NvcGUuZ3Iud2Vic2l0ZSA9IGNvcHlyaWdodDogJ0NvcHlyaWdodCDCqSAnICsgKG5ldyBEYXRlKS5nZXRGdWxsWWVhcigpICsgJyAtIFRvZG9zIG9zIGRpcmVpdG9zIHJlc2VydmFkb3MuJ1xuICAgICRyb290U2NvcGUuZ3IuY29udGFjdEhlYWRlciA9IFtcbiAgICAgICAge1xuICAgICAgICAgICAgdGl0bGU6ICdGYWNlYm9vayBBY29sbCdcbiAgICAgICAgICAgIGxpbms6ICdodHRwOi8vZmIuY29tL2Zhbi5hY29sbCdcbiAgICAgICAgICAgIGNsYXNzOiAnY29udGFjdCBmYSBmYS1mdyBmYS0yeCBmYS1mYWNlYm9vay1zcXVhcmUnXG4gICAgICAgIH1cbiAgICAgICAge1xuICAgICAgICAgICAgdGl0bGU6ICdFLW1haWwgQWNvbGwnXG4gICAgICAgICAgICBsaW5rOiAnbWFpbHRvOmNvbnRhdG9AYWNvbGwuY29tLmJyJ1xuICAgICAgICAgICAgY2xhc3M6ICdjb250YWN0IGZhIGZhLWZ3IGZhLTJ4IGZhLWVudmVsb3BlJ1xuICAgICAgICB9XG4gICAgXVxuICAgICRyb290U2NvcGUuZ3Iuc2hvcHMgPSBbXVxuICAgICRyb290U2NvcGUuZ3IuYmFubmVycyA9IFtdXG5cbiAgICAkZ3JSZXN0ZnVsLmZpbmQoXG4gICAgICAgIG1vZHVsZTogJ2Jhbm5lcidcbiAgICAgICAgYWN0aW9uOiAnZ2V0J1xuICAgICkudGhlbiAocikgLT5cbiAgICAgICAgaWYgci5yZXNwb25zZVxuICAgICAgICAgICAgJHJvb3RTY29wZS5nci5iYW5uZXJzID0gci5yZXNwb25zZVxuXG4gICAgJGdyUmVzdGZ1bC5maW5kKFxuICAgICAgICBtb2R1bGU6ICdzaG9wJ1xuICAgICAgICBhY3Rpb246ICdnZXQnXG4gICAgKS50aGVuIChyKSAtPlxuICAgICAgICBpZiByLnJlc3BvbnNlXG4gICAgICAgICAgICAkcm9vdFNjb3BlLmdyLnNob3BzID0gci5yZXNwb25zZVxuXG4gICAgJHJvb3RTY29wZS5sb2dvdXQgPSAtPlxuICAgICAgICBhbGVydC5zaG93ICdsb2FkaW5nJywgJ1NhaW5kby4uLicsIDBcbiAgICAgICAgJHJvb3RTY29wZS5sb2dvdXRpbmcgPSB0cnVlXG4gICAgICAgICRnclJlc3RmdWwuYXV0aFxuICAgICAgICAgICAgYWN0aW9uOiAnbG9nb3V0J1xuICAgICAgICAudGhlbiAocikgLT5cbiAgICAgICAgICAgIGRlbGV0ZSAkbG9jYWxTdG9yYWdlLmdyaWZmb19jYXJ0X3JlYWR5XG4gICAgICAgICAgICBpZiByLnJlc3BvbnNlXG4gICAgICAgICAgICAgICAgYWxlcnQuc2hvdyAnc3VjY2VzcycsICdWb2PDqiBzYWl1IGRvIHNpc3RlbWEgZSBlc3TDoSBzZW5kbyByZWRpcmVjaW9uYWRvISdcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnICdGYWxoYSBubyBsb2dvdXQhJ1xuICAgICAgICAgICAgJHJvb3RTY29wZS5sb2dvdXRpbmcgPSBmYWxzZVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICwgKHIpIC0+XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnICdGYWxoYSBubyBsb2dvdXQhJ1xuXG4gICAgZG8gLT5cbiAgICAgICAgaW5pdCA9IHRydWVcbiAgICAgICAgcmVhZHkgPVxuICAgICAgICAgICAgY2F0ZWdvcmllczogZmFsc2VcbiAgICAgICAgICAgIHByb2R1Y3RzOiBmYWxzZVxuXG4gICAgICAgIHNldFByb2R1Y3RzID0gLT5cbiAgICAgICAgICAgIHByb2R1Y3RMb29wID0gKGNhdGVnb3J5KSAtPlxuICAgICAgICAgICAgICAgIGNhdGVnb3J5LnByb2R1Y3RzID0gW11cbiAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2ggJHNjb3BlLnByb2R1Y3RzLCAocHJvZHVjdCkgLT5cbiAgICAgICAgICAgICAgICAgICAgaWYgcHJvZHVjdC5ma2lkY2F0ZWdvcnkgPT0gY2F0ZWdvcnkuaWRjYXRlZ29yeVxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdC5jb3VudCA9IDBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5LnByb2R1Y3RzLnB1c2ggcHJvZHVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5nci5jYXJ0LmFkZCBwcm9kdWN0XG4gICAgICAgICAgICAgICAgaWYgY2F0ZWdvcnkuY2hpbGRcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoIGNhdGVnb3J5LmNoaWxkLCAoc3ViY2F0ZWdvcnkpIC0+XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0TG9vcCBzdWJjYXRlZ29yeVxuXG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2ggJHNjb3BlLmNhdGVnb3JpZXMsIChjYXRlZ29yeSkgLT5cbiAgICAgICAgICAgICAgICBwcm9kdWN0TG9vcCBjYXRlZ29yeVxuXG4gICAgICAgICRsb2NhbFN0b3JhZ2UuZ3JpZmZvX2NhcnQgPSBbXSBpZiAhJGxvY2FsU3RvcmFnZS5ncmlmZm9fY2FydFxuICAgICAgICAjIGlmICRsb2NhbFN0b3JhZ2UuZ3JpZmZvX2NhcnRcbiAgICAgICAgIyAgICAgc3RydWN0ID0gJGxvY2FsU3RvcmFnZS5ncmlmZm9fY2FydFxuICAgICAgICAjICAgICBwcm9wZXJ0aWVzID0gW1xuICAgICAgICAjICAgICAgICAgJ2lkJ1xuICAgICAgICAjICAgICAgICAgJ25hbWUnXG4gICAgICAgICMgICAgICAgICAnY291bnQnXG4gICAgICAgICMgICAgICAgICAndW5pdHZhbHVlJ1xuICAgICAgICAjICAgICBdXG4gICAgICAgICNcbiAgICAgICAgIyAgICAgaWYgc3RydWN0XG4gICAgICAgICMgICAgICAgICBpZiAhYW5ndWxhci5lcXVhbHMoT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoc3RydWN0KSwgcHJvcGVydGllcylcbiAgICAgICAgIyAgICAgICAgICAgICAkbG9jYWxTdG9yYWdlLmdyaWZmb19jYXJ0ID0gW11cblxuICAgICAgICAkcm9vdFNjb3BlLiR3YXRjaCAnZ3IuY2FydC5pdGVtcycsICgoaXRlbXMpIC0+XG4gICAgICAgICAgICBhcnIgPSBbXVxuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoIGl0ZW1zLCAoaSkgLT5cbiAgICAgICAgICAgICAgICBpZiBpLmNvdW50ID4gMFxuICAgICAgICAgICAgICAgICAgICBhcnIucHVzaFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGkuaWRwcm9kdWN0IG9yIGkuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGkubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6IGkuY291bnRcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuaXR2YWx1ZTogaS51bml0dmFsdWVcblxuICAgICAgICAgICAgJGxvY2FsU3RvcmFnZS5ncmlmZm9fY2FydCA9IGFyclxuICAgICAgICApLCB0cnVlXG5cbiAgICAgICAgJHJvb3RTY29wZS5yZWFkeSA9IC0+XG4gICAgICAgICAgICBpZiByZWFkeS5jYXRlZ29yaWVzIGFuZCByZWFkeS5wcm9kdWN0c1xuICAgICAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBmYWxzZVxuXG4gICAgICAgICRyb290U2NvcGUucHJvZHVjdHMgPSBbXVxuICAgICAgICAkcm9vdFNjb3BlLmNhdGVnb3JpZXMgPSBbXVxuICAgICAgICAkcm9vdFNjb3BlLmdyLmNhcnQgPVxuICAgICAgICAgICAgdGl0bGU6ICdMaXN0YSBkbyBwZWRpZG8nXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NhcnQuaHRtbCdcbiAgICAgICAgICAgIHBsYWNlbWVudDogJ2JvdHRvbSdcbiAgICAgICAgICAgIGFuaW1hdGlvbjogZmFsc2VcbiAgICAgICAgICAgIHRyaWdnZXI6ICdjbGljaydcbiAgICAgICAgICAgIG9wZW5lZDogZmFsc2VcbiAgICAgICAgICAgIGl0ZW1zOiAkbG9jYWxTdG9yYWdlLmdyaWZmb19jYXJ0ID8gW11cbiAgICAgICAgICAgIGxlbmd0aDogKHRvdGFsKSAtPlxuICAgICAgICAgICAgICAgIGwgPSAwXG4gICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoICRyb290U2NvcGUuZ3IuY2FydC5pdGVtcywgKGl0ZW0pIC0+XG4gICAgICAgICAgICAgICAgICAgIGlmIGl0ZW0uY291bnQgPiAwIGFuZCAhdG90YWxcbiAgICAgICAgICAgICAgICAgICAgICAgIGwrK1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIHRvdGFsXG4gICAgICAgICAgICAgICAgICAgICAgICBsICs9IGl0ZW0uY291bnRcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgbFxuICAgICAgICAgICAgY2hlY2s6IChpdGVtKSAtPlxuICAgICAgICAgICAgICAgIGNvdW50ID0gcGFyc2VJbnQoaXRlbS5jb3VudClcbiAgICAgICAgICAgICAgICBpZiBjb3VudCA+IDEwMDBcbiAgICAgICAgICAgICAgICAgICAgY291bnQgPSAxMDAwXG4gICAgICAgICAgICAgICAgZWxzZSBpZiBjb3VudCA8IDBcbiAgICAgICAgICAgICAgICAgICAgY291bnQgPSAwXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAhL1swLTldKy8udGVzdChjb3VudClcbiAgICAgICAgICAgICAgICAgICAgY291bnQgPSAwXG4gICAgICAgICAgICAgICAgaXRlbS5jb3VudCA9IGNvdW50XG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICBjbGVhcjogLT5cbiAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2ggJHJvb3RTY29wZS5nci5jYXJ0Lml0ZW1zLCAoaXRlbSkgLT5cbiAgICAgICAgICAgICAgICAgICAgaXRlbS5jb3VudCA9IDBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICBoYXM6IChpdGVtKSAtPlxuICAgICAgICAgICAgICAgIGZvdW5kID0gZmFsc2VcbiAgICAgICAgICAgICAgICBpbmRleCA9IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCAkcm9vdFNjb3BlLmdyLmNhcnQuaXRlbXMsIChpLCBpZCkgLT5cbiAgICAgICAgICAgICAgICAgICAgaWYgaS5uYW1lID09IGl0ZW0ubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGlkXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIGlmIGZvdW5kIHRoZW4gaW5kZXggZWxzZSBmb3VuZFxuICAgICAgICAgICAgcmVtb3ZlOiAoaXRlbSkgLT5cbiAgICAgICAgICAgICAgICBpdGVtLmNvdW50ID0gMFxuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgYWRkOiAoaXRlbSkgLT5cbiAgICAgICAgICAgICAgICBmb3VuZCA9IGZhbHNlXG4gICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoICRyb290U2NvcGUuZ3IuY2FydC5pdGVtcywgKGkpIC0+XG4gICAgICAgICAgICAgICAgICAgIGlmIGkubmFtZSA9PSBpdGVtLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICBpZiAhZm91bmRcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5jb3VudCA9IDBcbiAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5nci5jYXJ0Lml0ZW1zLnB1c2ggaXRlbVxuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgdG90YWw6IC0+XG4gICAgICAgICAgICAgICAgdG90YWwgPSAwXG4gICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoICRyb290U2NvcGUuZ3IuY2FydC5pdGVtcywgKGl0ZW0pIC0+XG4gICAgICAgICAgICAgICAgICAgIHRvdGFsICs9IGl0ZW0udW5pdHZhbHVlICogaXRlbS5jb3VudFxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICB0b3RhbFxuICAgICAgICAgICAgc3VibWl0OiAtPlxuICAgICAgICAgICAgICAgIGlmICRyb290U2NvcGUuR1JJRkZPLmZpbHRlci5wYWdlLnVybCAhPSAnZmluaXNoLydcbiAgICAgICAgICAgICAgICAgICAgJGxvY2FsU3RvcmFnZS5ncmlmZm9fY2FydF9yZWFkeSA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQgLT5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSAkcm9vdFNjb3BlLkdSSUZGTy5jdXJBbGlhcyArICcvZmluaXNoJ1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmZpbmlzaEZvcm0uc3VibWl0KClcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIGNhbmNlbDogLT5cbiAgICAgICAgICAgICAgICAkZ3JNb2RhbC5jb25maXJtICdUZW0gY2VydGV6YSBxdWUgZGVzZWphIGNhbmNlbGFyPycsIC0+XG4gICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuZ3IuY2FydC5jbGVhcigpXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSAkbG9jYWxTdG9yYWdlLmdyaWZmb19jYXJ0X3JlYWR5XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIHJldHVyblxuXG4gICAgICAgICRnclJlc3RmdWwuZmluZFxuICAgICAgICAgICAgbW9kdWxlOiAnY2F0ZWdvcnknXG4gICAgICAgICAgICBhY3Rpb246ICdtb2R1bGUnXG4gICAgICAgICAgICBwYXJhbXM6ICduYW1lPXByb2R1Y3QnXG4gICAgICAgIC50aGVuIChyKSAtPlxuICAgICAgICAgICAgaWYgci5yZXNwb25zZVxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuY2F0ZWdvcmllcyA9IHIucmVzcG9uc2VcbiAgICAgICAgICAgICAgICByZWFkeS5jYXRlZ29yaWVzID0gdHJ1ZVxuICAgICAgICAgICAgICAgIGlmICRyb290U2NvcGUucmVhZHlcbiAgICAgICAgICAgICAgICAgICAgc2V0UHJvZHVjdHMoKVxuXG4gICAgICAgICRnclJlc3RmdWwuZmluZFxuICAgICAgICAgICAgbW9kdWxlOiAncHJvZHVjdCdcbiAgICAgICAgICAgIGFjdGlvbjogJ2dldCdcbiAgICAgICAgLnRoZW4gKHIpIC0+XG4gICAgICAgICAgICBpZiByLnJlc3BvbnNlXG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzID0gci5yZXNwb25zZVxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCByLnJlc3BvbnNlLCAoaXRlbSkgLT5cbiAgICAgICAgICAgICAgICAgICAgaXRlbS5waWN0dXJlID0gJHJvb3RTY29wZS5HUklGRk8udXBsb2FkUGF0aCArIGl0ZW0ucGljdHVyZVxuXG4gICAgICAgICAgICAgICAgcmVhZHkucHJvZHVjdHMgPSB0cnVlXG4gICAgICAgICAgICAgICAgaWYgJHJvb3RTY29wZS5yZWFkeVxuICAgICAgICAgICAgICAgICAgICBzZXRQcm9kdWN0cygpXG5cbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCdib2R5Jykub25cbiAgICAgICAgICAgIG1vdXNlZG93bjogKGUpIC0+XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gYW5ndWxhci5lbGVtZW50KGUudGFyZ2V0KVxuICAgICAgICAgICAgICAgIGlmIHRhcmdldC5wYXJlbnRzKCcuY2FydCcpLmxlbmd0aCA9PSAwIGFuZCAkc2NvcGUuZ3IuY2FydC5vcGVuZWRcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCcuYnRuLWNhcnQnKS50cmlnZ2VyICdjbGljaydcbiJdfQ==