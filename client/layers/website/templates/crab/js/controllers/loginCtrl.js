(function() {
  'use strict';
  angular.module('mainApp').controller('loginCtrl', ["$rootScope", "$scope", "$cookies", "$grRestful", "$grAlert", function($rootScope, $scope, $cookies, $grRestful, $grAlert) {
    var alert;
    $rootScope.gr.title = {
      icon: 'fa fa-fw fa-lock',
      text: 'Acesso restrito'
    };
    alert = $grAlert["new"]();
    return $scope.formSettings = {
      data: {},
      schema: [
        {
          property: 'user',
          type: 'email',
          label: 'E-mail',
          addons: [
            {
              before: true,
              icon: 'fa fa-fw fa-envelope'
            }
          ],
          attr: {
            required: true
          },
          msgs: {
            required: 'Preencha o usuário',
            email: 'E-mail inválido'
          }
        }, {
          property: 'password',
          type: 'password',
          label: 'Senha',
          addons: [
            {
              before: true,
              icon: 'fa fa-fw fa-lock'
            }
          ],
          attr: {
            required: true,
            ngMinlength: 4,
            ngMaxlength: 16
          },
          msgs: {
            required: 'A senha é obrigatória',
            minlength: 'A senha deve possuir no mínimo 4 caractéres',
            maxlength: 'A senha deve possuir no máximo 16 caractéres'
          }
        }
      ],
      submit: function(data) {
        if ($scope.form.$invalid) {
          return;
        }
        return $grRestful.auth({
          action: 'login',
          post: data
        }).then(function(r) {
          if (r.response) {
            if (!$cookies.griffo_cart_ready) {
              location.href = $rootScope.GRIFFO.curAlias + '/user';
            } else {
              location.href = $rootScope.GRIFFO.curAlias + '/finish';
            }
            delete $cookies.griffo_cart_ready;
          }
          return alert.show(r.status, r.message);
        }, function(error) {
          return alert.show('danger', 'ERROR.FATAL');
        });
      }
    };
  }]);

  angular.module('mainApp').controller('signupCtrl', ["$rootScope", "$scope", "$cookies", "$grRestful", "$grAlert", "$cidadeEstado", "$timeout", function($rootScope, $scope, $cookies, $grRestful, $grAlert, $cidadeEstado, $timeout) {
    var alert;
    alert = $grAlert["new"]();
    $scope.shops = [];
    $grRestful.find({
      module: 'shop',
      action: 'select'
    }).then(function(r) {
      if (r.response) {
        return $scope.shops = r.response;
      }
    });
    $scope.states = [];
    angular.forEach($cidadeEstado.get.estados(), function(e) {
      return $scope.states.push({
        value: e[0],
        label: e[1]
      });
    });
    $scope.formSettings = {
      data: {
        status: true,
        state: 'SP',
        preferredshop: 'Itapeva'
      },
      schema: [
        {
          property: 'fkidshop',
          type: 'select',
          label: 'Loja preferencial',
          list: 'item.value as item.label for item in shops',
          columns: 12,
          attr: {
            required: true
          },
          msgs: {
            required: 'Selecione uma loja preferencial'
          }
        }, {
          property: 'name',
          type: 'text',
          label: 'Nome',
          columns: 12,
          attr: {
            required: true
          },
          msgs: {
            required: 'Preencha o nome'
          }
        }, {
          property: 'phone',
          type: 'phone',
          label: 'Telefone',
          columns: {
            xs: 12,
            sm: 12,
            md: 6
          },
          attr: {
            ngRequired: '!formSettings.data.mobilephone',
            required: true
          },
          msgs: {
            required: 'Informe o Telefone',
            mask: 'O telefone é inválido'
          }
        }, {
          property: 'mobilephone',
          type: 'mobilephone',
          label: 'Celular',
          columns: {
            xs: 12,
            sm: 12,
            md: 6
          },
          attr: {
            ngRequired: '!formSettings.data.phone',
            required: true
          },
          msgs: {
            required: 'Informe o Celular',
            mask: 'O celular é inválido'
          }
        }, {
          property: 'email',
          type: 'email',
          label: 'E-mail',
          placeholder: 'exemplo@exemplo.com',
          columns: {
            xs: 12,
            sm: 12,
            md: 6
          },
          attr: {
            required: true
          },
          msgs: {
            required: 'Informe o e-mail',
            email: 'O formato do e-mail é inválido!'
          }
        }, {
          property: 'password',
          type: 'password',
          label: 'Senha',
          columns: {
            xs: 12,
            sm: 12,
            md: 6
          },
          attr: {
            required: true,
            ngMinlength: 4,
            ngMaxlength: 16
          },
          msgs: {
            required: 'A senha é obrigatória',
            minlength: 'A senha deve possuir no mínimo 4 caractéres',
            maxlength: 'A senha deve possuir no máximo 16 caractéres',
            pattern: 'A senha é inválida'
          }
        }, {
          property: 'address',
          type: 'text',
          label: 'Endereço',
          columns: 8,
          attr: {
            required: true
          },
          msgs: {
            required: 'Preencha o endereço'
          }
        }, {
          property: 'number',
          type: 'text',
          label: 'Número',
          number: true,
          columns: 4,
          attr: {
            required: true
          },
          msgs: {
            required: 'Preencha o número'
          }
        }, {
          property: 'complement',
          type: 'text',
          label: 'Complemento',
          columns: 6
        }, {
          property: 'district',
          type: 'text',
          label: 'Bairro',
          columns: 6,
          attr: {
            required: true
          },
          msgs: {
            required: 'Preencha o bairro'
          }
        }, {
          property: 'state',
          type: 'select',
          label: 'Estado',
          columns: 6,
          list: 'item.value as item.label for item in states',
          attr: {
            required: true
          },
          msgs: {
            required: 'Selecione um estado'
          }
        }, {
          property: 'city',
          type: 'select',
          label: 'Cidade',
          columns: 6,
          list: 'item.value as item.label for item in cities',
          attr: {
            required: true
          },
          msgs: {
            required: 'Selecione uma cidade'
          }
        }
      ],
      submit: function(data) {
        if ($scope.form.$invalid) {
          return;
        }
        return $grRestful.create({
          module: 'client',
          action: 'insert',
          post: data
        }).then(function(r) {
          if (r.response) {
            return $grRestful.auth({
              action: 'login',
              post: {
                user: data.email,
                password: data.password
              }
            }).then(function(r) {
              if (r.response) {
                alert.show('success', 'Cadastro realizado com sucesso, você está sendo redirecionado...');
                if (!$cookies.griffo_cart_ready) {
                  location.href = $rootScope.GRIFFO.curAlias + '/user';
                } else {
                  location.href = $rootScope.GRIFFO.curAlias + '/finish';
                }
                return delete $cookies.griffo_cart_ready;
              } else {
                return alert.show(r.status, r.message);
              }
            });
          }
        }, function(error) {
          return alert.show('danger', 'ERROR.FATAL');
        });
      }
    };
    return $scope.$watch('formSettings.data.state', function(e) {
      if (e) {
        if ($scope.formSettings.data.state) {
          $scope.cities = [];
          angular.forEach($cidadeEstado.get.cidades($scope.formSettings.data.state), function(c) {
            return $scope.cities.push({
              value: c,
              label: c
            });
          });
        } else {
          $scope.cities = [];
        }
        if ($scope.formSettings.data.state === 'SP') {
          return $scope.formSettings.data.city = 'Itapeva';
        } else {
          return $scope.formSettings.data.city = void 0;
        }
      } else {
        return $scope.formSettings.data.city = void 0;
      }
    });
  }]);

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNsaWVudC9sYXllcnMvd2Vic2l0ZS90ZW1wbGF0ZXMvY3JhYi9jb2ZmZWUvY29udHJvbGxlcnMvbG9naW5DdHJsLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUFBO0VBQ0EsT0FBTyxDQUFDLE1BQVIsQ0FBZSxTQUFmLENBQXlCLENBQUMsVUFBMUIsQ0FBcUMsV0FBckMsRUFBa0QsU0FBQyxVQUFELEVBQWEsTUFBYixFQUFxQixRQUFyQixFQUErQixVQUEvQixFQUEyQyxRQUEzQztBQUU5QyxRQUFBO0lBQUEsVUFBVSxDQUFDLEVBQUUsQ0FBQyxLQUFkLEdBQ0k7TUFBQSxJQUFBLEVBQU0sa0JBQU47TUFDQSxJQUFBLEVBQU0saUJBRE47O0lBR0osS0FBQSxHQUFRLFFBQVEsQ0FBQyxLQUFELENBQVIsQ0FBQTtXQUVSLE1BQU0sQ0FBQyxZQUFQLEdBQ0k7TUFBQSxJQUFBLEVBQU0sRUFBTjtNQUNBLE1BQUEsRUFBUTtRQUNKO1VBQ0ksUUFBQSxFQUFVLE1BRGQ7VUFFSSxJQUFBLEVBQU0sT0FGVjtVQUdJLEtBQUEsRUFBTyxRQUhYO1VBSUksTUFBQSxFQUFRO1lBQ0o7Y0FDSSxNQUFBLEVBQVEsSUFEWjtjQUVJLElBQUEsRUFBTSxzQkFGVjthQURJO1dBSlo7VUFVSSxJQUFBLEVBQU07WUFBQSxRQUFBLEVBQVUsSUFBVjtXQVZWO1VBV0ksSUFBQSxFQUNJO1lBQUEsUUFBQSxFQUFVLG9CQUFWO1lBQ0EsS0FBQSxFQUFPLGlCQURQO1dBWlI7U0FESSxFQWdCSjtVQUNJLFFBQUEsRUFBVSxVQURkO1VBRUksSUFBQSxFQUFNLFVBRlY7VUFHSSxLQUFBLEVBQU8sT0FIWDtVQUlJLE1BQUEsRUFBUTtZQUNKO2NBQ0ksTUFBQSxFQUFRLElBRFo7Y0FFSSxJQUFBLEVBQU0sa0JBRlY7YUFESTtXQUpaO1VBVUksSUFBQSxFQUNJO1lBQUEsUUFBQSxFQUFVLElBQVY7WUFDQSxXQUFBLEVBQWEsQ0FEYjtZQUVBLFdBQUEsRUFBYSxFQUZiO1dB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QyxZQUFZLENBQUMsSUFBSSxDQUFDLElBQXpCLEdBQWdDLE9BakJwQzs7SUFEcUMsQ0FBekM7RUFyTDJDLENBQW5EO0FBbkVBIiwiZmlsZSI6ImNsaWVudC9sYXllcnMvd2Vic2l0ZS90ZW1wbGF0ZXMvY3JhYi9qcy9jb250cm9sbGVycy9sb2dpbkN0cmwuanMiLCJzb3VyY2VSb290IjoiL3NvdXJjZS8iLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcbmFuZ3VsYXIubW9kdWxlKCdtYWluQXBwJykuY29udHJvbGxlciAnbG9naW5DdHJsJywgKCRyb290U2NvcGUsICRzY29wZSwgJGNvb2tpZXMsICRnclJlc3RmdWwsICRnckFsZXJ0KSAtPlxuXG4gICAgJHJvb3RTY29wZS5nci50aXRsZSA9XG4gICAgICAgIGljb246ICdmYSBmYS1mdyBmYS1sb2NrJ1xuICAgICAgICB0ZXh0OiAnQWNlc3NvIHJlc3RyaXRvJ1xuXG4gICAgYWxlcnQgPSAkZ3JBbGVydC5uZXcoKVxuXG4gICAgJHNjb3BlLmZvcm1TZXR0aW5ncyA9XG4gICAgICAgIGRhdGE6IHt9XG4gICAgICAgIHNjaGVtYTogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHByb3BlcnR5OiAndXNlcidcbiAgICAgICAgICAgICAgICB0eXBlOiAnZW1haWwnXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdFLW1haWwnXG4gICAgICAgICAgICAgICAgYWRkb25zOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlZm9yZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2ZhIGZhLWZ3IGZhLWVudmVsb3BlJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIGF0dHI6IHJlcXVpcmVkOiB0cnVlXG4gICAgICAgICAgICAgICAgbXNnczpcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6ICdQcmVlbmNoYSBvIHVzdcOhcmlvJ1xuICAgICAgICAgICAgICAgICAgICBlbWFpbDogJ0UtbWFpbCBpbnbDoWxpZG8nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcHJvcGVydHk6ICdwYXNzd29yZCdcbiAgICAgICAgICAgICAgICB0eXBlOiAncGFzc3dvcmQnXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdTZW5oYSdcbiAgICAgICAgICAgICAgICBhZGRvbnM6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmVmb3JlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnZmEgZmEtZncgZmEtbG9jaydcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICBhdHRyOlxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICBuZ01pbmxlbmd0aDogNFxuICAgICAgICAgICAgICAgICAgICBuZ01heGxlbmd0aDogMTZcbiAgICAgICAgICAgICAgICBtc2dzOlxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogJ0Egc2VuaGEgw6kgb2JyaWdhdMOzcmlhJ1xuICAgICAgICAgICAgICAgICAgICBtaW5sZW5ndGg6ICdBIHNlbmhhIGRldmUgcG9zc3VpciBubyBtw61uaW1vIDQgY2FyYWN0w6lyZXMnXG4gICAgICAgICAgICAgICAgICAgIG1heGxlbmd0aDogJ0Egc2VuaGEgZGV2ZSBwb3NzdWlyIG5vIG3DoXhpbW8gMTYgY2FyYWN0w6lyZXMnXG4gICAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgICAgc3VibWl0OiAoZGF0YSkgLT5cbiAgICAgICAgICAgIHJldHVybiBpZiAkc2NvcGUuZm9ybS4kaW52YWxpZFxuXG4gICAgICAgICAgICAkZ3JSZXN0ZnVsLmF1dGhcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdsb2dpbidcbiAgICAgICAgICAgICAgICBwb3N0OiBkYXRhXG4gICAgICAgICAgICAudGhlbiAocikgLT5cblxuICAgICAgICAgICAgICAgIGlmIHIucmVzcG9uc2VcbiAgICAgICAgICAgICAgICAgICAgaWYgISRjb29raWVzLmdyaWZmb19jYXJ0X3JlYWR5XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gJHJvb3RTY29wZS5HUklGRk8uY3VyQWxpYXMgKyAnL3VzZXInXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSAkcm9vdFNjb3BlLkdSSUZGTy5jdXJBbGlhcyArICcvZmluaXNoJ1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgJGNvb2tpZXMuZ3JpZmZvX2NhcnRfcmVhZHlcblxuICAgICAgICAgICAgICAgIGFsZXJ0LnNob3cgci5zdGF0dXMsIHIubWVzc2FnZVxuXG4gICAgICAgICAgICAsIChlcnJvcikgLT5cbiAgICAgICAgICAgICAgICBhbGVydC5zaG93ICdkYW5nZXInLCAnRVJST1IuRkFUQUwnXG5cbmFuZ3VsYXIubW9kdWxlKCdtYWluQXBwJykuY29udHJvbGxlciAnc2lnbnVwQ3RybCcsICgkcm9vdFNjb3BlLCAkc2NvcGUsICRjb29raWVzLCAkZ3JSZXN0ZnVsLCAkZ3JBbGVydCwgJGNpZGFkZUVzdGFkbywgJHRpbWVvdXQpIC0+XG4gICAgICAgIFxuICAgICAgICBhbGVydCA9ICRnckFsZXJ0Lm5ldygpXG4gICAgICAgICRzY29wZS5zaG9wcyA9IFtdXG5cbiAgICAgICAgJGdyUmVzdGZ1bC5maW5kXG4gICAgICAgICAgICBtb2R1bGU6ICdzaG9wJ1xuICAgICAgICAgICAgYWN0aW9uOiAnc2VsZWN0J1xuICAgICAgICAudGhlbiAocikgLT5cbiAgICAgICAgICAgICRzY29wZS5zaG9wcyA9IHIucmVzcG9uc2UgaWYgci5yZXNwb25zZVxuXG4gICAgICAgICRzY29wZS5zdGF0ZXMgPSBbXVxuXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaCAkY2lkYWRlRXN0YWRvLmdldC5lc3RhZG9zKCksIChlKSAtPlxuICAgICAgICAgICAgJHNjb3BlLnN0YXRlcy5wdXNoXG4gICAgICAgICAgICAgICAgdmFsdWU6IGVbMF1cbiAgICAgICAgICAgICAgICBsYWJlbDogZVsxXVxuXG4gICAgICAgICRzY29wZS5mb3JtU2V0dGluZ3MgPVxuICAgICAgICAgICAgZGF0YTpcbiAgICAgICAgICAgICAgICBzdGF0dXM6IHRydWVcbiAgICAgICAgICAgICAgICBzdGF0ZTogJ1NQJ1xuICAgICAgICAgICAgICAgIHByZWZlcnJlZHNob3A6ICdJdGFwZXZhJ1xuICAgICAgICAgICAgc2NoZW1hOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eTogJ2ZraWRzaG9wJ1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc2VsZWN0J1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ0xvamEgcHJlZmVyZW5jaWFsJ1xuICAgICAgICAgICAgICAgICAgICBsaXN0OiAnaXRlbS52YWx1ZSBhcyBpdGVtLmxhYmVsIGZvciBpdGVtIGluIHNob3BzJ1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW5zOiAxMlxuICAgICAgICAgICAgICAgICAgICBhdHRyOiByZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICBtc2dzOiByZXF1aXJlZDogJ1NlbGVjaW9uZSB1bWEgbG9qYSBwcmVmZXJlbmNpYWwnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHk6ICduYW1lJ1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCdcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdOb21lJ1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW5zOiAxMlxuICAgICAgICAgICAgICAgICAgICBhdHRyOiByZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICBtc2dzOiByZXF1aXJlZDogJ1ByZWVuY2hhIG8gbm9tZSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eTogJ3Bob25lJ1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncGhvbmUnXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnVGVsZWZvbmUnXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbnM6XG4gICAgICAgICAgICAgICAgICAgICAgICB4czogMTJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNtOiAxMlxuICAgICAgICAgICAgICAgICAgICAgICAgbWQ6IDZcbiAgICAgICAgICAgICAgICAgICAgYXR0cjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG5nUmVxdWlyZWQ6ICchZm9ybVNldHRpbmdzLmRhdGEubW9iaWxlcGhvbmUnXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICBtc2dzOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6ICdJbmZvcm1lIG8gVGVsZWZvbmUnXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXNrOiAnTyB0ZWxlZm9uZSDDqSBpbnbDoWxpZG8nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHk6ICdtb2JpbGVwaG9uZSdcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ21vYmlsZXBob25lJ1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ0NlbHVsYXInXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbnM6XG4gICAgICAgICAgICAgICAgICAgICAgICB4czogMTJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNtOiAxMlxuICAgICAgICAgICAgICAgICAgICAgICAgbWQ6IDZcbiAgICAgICAgICAgICAgICAgICAgYXR0cjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG5nUmVxdWlyZWQ6ICchZm9ybVNldHRpbmdzLmRhdGEucGhvbmUnXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICBtc2dzOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6ICdJbmZvcm1lIG8gQ2VsdWxhcidcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hc2s6ICdPIGNlbHVsYXIgw6kgaW52w6FsaWRvJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnR5OiAnZW1haWwnXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlbWFpbCdcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdFLW1haWwnXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnZXhlbXBsb0BleGVtcGxvLmNvbSdcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uczpcbiAgICAgICAgICAgICAgICAgICAgICAgIHhzOiAxMlxuICAgICAgICAgICAgICAgICAgICAgICAgc206IDEyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZDogNlxuICAgICAgICAgICAgICAgICAgICBhdHRyOiByZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICBtc2dzOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6ICdJbmZvcm1lIG8gZS1tYWlsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6ICdPIGZvcm1hdG8gZG8gZS1tYWlsIMOpIGludsOhbGlkbyEnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHk6ICdwYXNzd29yZCdcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3Bhc3N3b3JkJ1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ1NlbmhhJ1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW5zOlxuICAgICAgICAgICAgICAgICAgICAgICAgeHM6IDEyXG4gICAgICAgICAgICAgICAgICAgICAgICBzbTogMTJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1kOiA2XG4gICAgICAgICAgICAgICAgICAgIGF0dHI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgbmdNaW5sZW5ndGg6IDRcbiAgICAgICAgICAgICAgICAgICAgICAgIG5nTWF4bGVuZ3RoOiAxNlxuICAgICAgICAgICAgICAgICAgICBtc2dzOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6ICdBIHNlbmhhIMOpIG9icmlnYXTDs3JpYSdcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmxlbmd0aDogJ0Egc2VuaGEgZGV2ZSBwb3NzdWlyIG5vIG3DrW5pbW8gNCBjYXJhY3TDqXJlcydcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heGxlbmd0aDogJ0Egc2VuaGEgZGV2ZSBwb3NzdWlyIG5vIG3DoXhpbW8gMTYgY2FyYWN0w6lyZXMnXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuOiAnQSBzZW5oYSDDqSBpbnbDoWxpZGEnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHk6ICdhZGRyZXNzJ1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCdcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdFbmRlcmXDp28nXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbnM6IDhcbiAgICAgICAgICAgICAgICAgICAgYXR0cjogcmVxdWlyZWQ6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgbXNnczogcmVxdWlyZWQ6ICdQcmVlbmNoYSBvIGVuZGVyZcOnbydcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eTogJ251bWJlcidcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnTsO6bWVybydcbiAgICAgICAgICAgICAgICAgICAgbnVtYmVyOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbnM6IDRcbiAgICAgICAgICAgICAgICAgICAgYXR0cjogcmVxdWlyZWQ6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgbXNnczogcmVxdWlyZWQ6ICdQcmVlbmNoYSBvIG7Dum1lcm8nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHk6ICdjb21wbGVtZW50J1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCdcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDb21wbGVtZW50bydcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uczogNlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnR5OiAnZGlzdHJpY3QnXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0J1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ0JhaXJybydcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uczogNlxuICAgICAgICAgICAgICAgICAgICBhdHRyOiByZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICBtc2dzOiByZXF1aXJlZDogJ1ByZWVuY2hhIG8gYmFpcnJvJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnR5OiAnc3RhdGUnXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzZWxlY3QnXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnRXN0YWRvJ1xuICAgICAgICAgICAgICAgICAgICBjb2x1bW5zOiA2XG4gICAgICAgICAgICAgICAgICAgIGxpc3Q6ICdpdGVtLnZhbHVlIGFzIGl0ZW0ubGFiZWwgZm9yIGl0ZW0gaW4gc3RhdGVzJ1xuICAgICAgICAgICAgICAgICAgICBhdHRyOiByZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICBtc2dzOiByZXF1aXJlZDogJ1NlbGVjaW9uZSB1bSBlc3RhZG8nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydHk6ICdjaXR5J1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc2VsZWN0J1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ0NpZGFkZSdcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uczogNlxuICAgICAgICAgICAgICAgICAgICBsaXN0OiAnaXRlbS52YWx1ZSBhcyBpdGVtLmxhYmVsIGZvciBpdGVtIGluIGNpdGllcydcbiAgICAgICAgICAgICAgICAgICAgYXR0cjogcmVxdWlyZWQ6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgbXNnczogcmVxdWlyZWQ6ICdTZWxlY2lvbmUgdW1hIGNpZGFkZSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdXG4gICAgICAgICAgICBzdWJtaXQ6IChkYXRhKSAtPlxuICAgICAgICAgICAgICAgIHJldHVybiBpZiAkc2NvcGUuZm9ybS4kaW52YWxpZFxuXG4gICAgICAgICAgICAgICAgJGdyUmVzdGZ1bC5jcmVhdGVcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlOiAnY2xpZW50J1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdpbnNlcnQnXG4gICAgICAgICAgICAgICAgICAgIHBvc3Q6IGRhdGFcbiAgICAgICAgICAgICAgICAudGhlbiAocikgLT5cbiAgICAgICAgICAgICAgICAgICAgaWYgci5yZXNwb25zZVxuICAgICAgICAgICAgICAgICAgICAgICAgJGdyUmVzdGZ1bC5hdXRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnbG9naW4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcjogZGF0YS5lbWFpbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogZGF0YS5wYXNzd29yZFxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4gKHIpIC0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgci5yZXNwb25zZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydC5zaG93ICdzdWNjZXNzJywgJ0NhZGFzdHJvIHJlYWxpemFkbyBjb20gc3VjZXNzbywgdm9jw6ogZXN0w6Egc2VuZG8gcmVkaXJlY2lvbmFkby4uLidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgISRjb29raWVzLmdyaWZmb19jYXJ0X3JlYWR5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gJHJvb3RTY29wZS5HUklGRk8uY3VyQWxpYXMgKyAnL3VzZXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSAkcm9vdFNjb3BlLkdSSUZGTy5jdXJBbGlhcyArICcvZmluaXNoJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgJGNvb2tpZXMuZ3JpZmZvX2NhcnRfcmVhZHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0LnNob3cgci5zdGF0dXMsIHIubWVzc2FnZVxuXG4gICAgICAgICAgICAgICAgLCAoZXJyb3IpIC0+XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0LnNob3cgJ2RhbmdlcicsICdFUlJPUi5GQVRBTCdcblxuICAgICAgICAkc2NvcGUuJHdhdGNoICdmb3JtU2V0dGluZ3MuZGF0YS5zdGF0ZScsIChlKSAtPlxuICAgICAgICAgICAgaWYgZVxuXG4gICAgICAgICAgICAgICAgaWYgJHNjb3BlLmZvcm1TZXR0aW5ncy5kYXRhLnN0YXRlXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jaXRpZXMgPSBbXVxuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2ggJGNpZGFkZUVzdGFkby5nZXQuY2lkYWRlcygkc2NvcGUuZm9ybVNldHRpbmdzLmRhdGEuc3RhdGUpLCAoYykgLT5cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jaXRpZXMucHVzaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBjXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGNcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jaXRpZXMgPSBbXVxuXG4gICAgICAgICAgICAgICAgaWYgJHNjb3BlLmZvcm1TZXR0aW5ncy5kYXRhLnN0YXRlID09ICdTUCdcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmZvcm1TZXR0aW5ncy5kYXRhLmNpdHkgPSAnSXRhcGV2YSdcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5mb3JtU2V0dGluZ3MuZGF0YS5jaXR5ID0gdW5kZWZpbmVkXG5cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAkc2NvcGUuZm9ybVNldHRpbmdzLmRhdGEuY2l0eSA9IHVuZGVmaW5lZFxuIl19